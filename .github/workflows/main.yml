name: Ubuntu XFCE Desktop + LocalXpose (Binary Method)

on: [workflow_dispatch]

jobs:
  launch-desktop:
    runs-on: ubuntu-latest

    steps:
    - name: Start Ubuntu XFCE in Docker
      run: |
        docker run -d --name ubuntu-xfce -p 6901:6901 accetto/ubuntu-vnc-xfce-g3

    - name: Download LocalXpose Binary
      run: |
        wget -O loclx https://api.localxpose.io/api/downloads/loclx-linux-amd64
        chmod +x loclx
        ./loclx version

    - name: Authenticate LocalXpose
      run: |
        ./loclx authtoken DgN6KiykIQ1cb7XvcoaYz2AXX68yIwvUndjYfchQ

    - name: Start LocalXpose Tunnel
      run: |
        nohup ./loclx tunnel http --port 6901 --subdomain vipraxubuntu123 > tunnel.log 2>&1 &

    - name: Keep Workflow Alive
      run: |
        tail -f /dev/null
